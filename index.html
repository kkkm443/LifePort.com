<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#3182F6">
    <title>LifePort</title>
    
    <!-- PWA ì„¤ì • -->
    <link rel="manifest" href="./manifest.json">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/2953/2953363.png">
    
    <!-- React & Tailwind -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        body { font-family: 'Pretendard', sans-serif; -webkit-tap-highlight-color: transparent; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }
        
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 24px; width: 24px; border-radius: 50%;
            background: #ffffff; border: 2px solid #3182F6;
            box-shadow: 0 2px 6px rgba(49, 130, 246, 0.4); margin-top: -8px;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 8px; border-radius: 4px;
        }
        /* ì…ë ¥ í¼ ìŠ¤íƒ€ì¼ */
        .input-group label { display: block; font-size: 13px; color: #6b7280; margin-bottom: 6px; font-weight: 600; }
        .input-group input, .input-group select { 
            width: 100%; padding: 14px; border-radius: 12px; border: 1px solid #e5e7eb; 
            font-size: 16px; font-weight: 500; color: #1f2937; outline: none; transition: all 0.2s;
            background-color: #fff;
        }
        .input-group input:focus, .input-group select:focus { border-color: #3182F6; ring: 2px solid #3182F6; }
    </style>
</head>
<body class="bg-[#F2F4F6]">
    <div id="root"></div>

    <script type="text/babel">
        // --- ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸ ---
        const Icon = ({ d, size=20, color="currentColor" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d={d} /></svg>
        );
        const Icons = {
            User: "M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2 M12 7a4 4 0 1 0 0-8 4 4 0 0 0 0 8",
            Alert: "M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z M12 9v4 M12 17h.01",
            Shield: "M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",
            Refresh: "M23 4v6h-6 M1 20v-6h6 M3.51 9a9 9 0 0 1 14.85-3.36L23 10 M1 14l4.64 4.36A9 9 0 0 0 20.49 15",
            Bank: "M3 22h18 M6 18v-7 M10 18v-7 M14 18v-7 M18 18v-7 M12 2l8 5H4z",
            Card: "M1 4h22v16H1z M1 10h22",
            Graph: "M23 6l-9.5 9.5-5-5L1 18",
            Activity: "M22 12h-4l-3 9L9 3l-3 9H2",
            ArrowRight: "M5 12h14 M12 5l7 7-7 7"
        };

        const LifePortSimulator = () => {
            const [screen, setScreen] = React.useState('intro'); // intro, input, loading, result
            const [loadingStep, setLoadingStep] = React.useState(0);
            
            // ì‚¬ìš©ì ì…ë ¥ ë°ì´í„° (ê¸°ë³¸ê°’)
            const [inputData, setInputData] = React.useState({
                age: 30,
                jobType: 'office', 
                monthlyIncome: 300,
                totalAssets: 5000,
                monthlyExpense: 150
            });

            const [profile, setProfile] = React.useState(null);
            const [simulationResult, setSimulationResult] = React.useState(null);
            const [lifestyle, setLifestyle] = React.useState('standard'); 
            const [activeRisks, setActiveRisks] = React.useState({}); 
            const [savings, setSavings] = React.useState(0); 

            // ì§ì—…ë³„ ê¸°ë³¸ ì„¸íŒ…
            const jobTraits = {
                office: { title: 'ì§ì¥ì¸', retirementAge: 60, investMin: 2, investMax: 4 },
                free: { title: 'í”„ë¦¬ëœì„œ', retirementAge: 65, investMin: 2, investMax: 5 },
                civil: { title: 'ê³µë¬´ì›', retirementAge: 60, investMin: 1.5, investMax: 3 },
                startup: { title: 'ì°½ì—…/ì‚¬ì—…ê°€', retirementAge: 65, investMin: 1, investMax: 6 },
                pro: { title: 'ì „ë¬¸ì§', retirementAge: 68, investMin: 2.5, investMax: 5.5 }
            };

            const riskScenarios = {
                20: [{ id: 'marriage', title: 'ğŸ’ ê²°í˜¼/ë…ë¦½ ìê¸ˆ', loss: 8000, prob: '70%' }, { id: 'car', title: 'ğŸš— ì°¨ëŸ‰ êµ¬ë§¤', loss: 3000, prob: '60%' }],
                30: [{ id: 'housing', title: 'ğŸ  ì£¼íƒ ëŒ€ì¶œ ì´ì', loss: 10000, prob: '50%' }, { id: 'child', title: 'ğŸ‘¶ ìœ¡ì•„ ë¹„ìš©', loss: 4000, prob: '40%' }],
                40: [{ id: 'education', title: 'ğŸ“ ìë…€ êµìœ¡ë¹„', loss: 12000, prob: '80%' }, { id: 'medical', title: 'ğŸ¥ ê°€ì¡± ì˜ë£Œë¹„', loss: 5000, prob: '24%' }],
                50: [{ id: 'business', title: 'ğŸ“‰ íˆ¬ì ì†ì‹¤', loss: 15000, prob: '30%' }, { id: 'job', title: 'ğŸ’¼ ì¡°ê¸° í‡´ì§', loss: 5000, prob: '15%' }],
                60: [{ id: 'health', title: 'ğŸ¥ ë…¸í›„ ì˜ë£Œë¹„', loss: 8000, prob: '35%' }, { id: 'scam', title: 'ğŸ’¸ ì‚¬ê¸°/ë¶„ìŸ', loss: 10000, prob: '15%' }]
            };

            const rand = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
            const formatMoney = (val) => val >= 10000 ? (val/10000).toFixed(1).replace('.0','') + 'ì–µ' : val.toLocaleString() + 'ë§Œì›';

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setInputData(prev => ({ ...prev, [name]: name === 'jobType' ? value : Number(value) }));
            };

            const createProfileFromInput = () => {
                const trait = jobTraits[inputData.jobType];
                const ageKey = Math.floor(inputData.age/10)*10;
                const safeAgeKey = (ageKey > 60) ? 60 : (ageKey < 20 ? 20 : ageKey);

                return {
                    age: inputData.age,
                    job: trait.title,
                    monthlyIncome: inputData.monthlyIncome,
                    baseMonthlyExpense: inputData.monthlyExpense,
                    totalAssets: inputData.totalAssets,
                    totalDebt: 0, 
                    risks: riskScenarios[safeAgeKey] || riskScenarios[40],
                    retirementAge: trait.retirementAge,
                    investmentReturn: rand(trait.investMin * 10, trait.investMax * 10) / 10 
                };
            };

            const runSimulation = () => {
                if (!profile) return;
                let assets = profile.totalAssets;
                let isBankrupt = false;
                let bankruptAge = 100;
                
                let lifestyleMult = lifestyle === 'basic' ? 0.8 : (lifestyle === 'rich' ? 1.4 : 1.0);
                
                Object.keys(activeRisks).forEach(id => { if(activeRisks[id]) assets -= profile.risks.find(r=>r.id===id).loss; });

                for (let age = profile.age; age <= 100; age++) {
                    let income = 0;
                    if (age <= profile.retirementAge) {
                        income = profile.monthlyIncome * 12;
                    } else {
                        let pension = Math.min(profile.monthlyIncome * 0.4, 200);
                        income = pension * 12;
                    }

                    // ì €ì¶• íš¨ìœ¨ 30% ì ìš© (200ë§Œì› ì €ì¶• -> ì‹¤ì§ˆ 60ë§Œì› íš¨ê³¼)
                    let effectiveSavings = Math.floor(savings * 0.30);
                    let monthlyExp = (profile.baseMonthlyExpense * lifestyleMult) - effectiveSavings;
                    
                    let minLiving = 60 + (age - 30) * 1.0; 
                    if(age > profile.retirementAge) minLiving = 60 + (profile.retirementAge - 30) * 1.0 + (age - profile.retirementAge) * 0.5;
                    if(monthlyExp < minLiving) monthlyExp = minLiving;
                    
                    let annualExp = monthlyExp * 12 * Math.pow(1.03, age - profile.age);

                    let gain = (assets > 0) ? assets * (profile.investmentReturn / 100) : assets * 0.06;
                    let net = income - annualExp + gain;
                    assets += net;

                    if (assets < 0) {
                        if (age > profile.retirementAge || net < 0) {
                            isBankrupt = true; bankruptAge = age; break;
                        }
                    }
                }

                const currentExp = (profile.baseMonthlyExpense * lifestyleMult) - savings;
                const safeExp = currentExp > 0 ? currentExp : 1;
                const savingRate = Math.round(((profile.monthlyIncome - currentExp) / profile.monthlyIncome) * 100);
                const liquid = Math.max(0, assets * 0.2);
                
                setSimulationResult({ 
                    isBankrupt, bankruptAge, savingRate: Math.max(0, savingRate), 
                    dsr: 0, 
                    emergency: (liquid / safeExp).toFixed(1)
                });
            };

            React.useEffect(() => { if (profile) runSimulation(); }, [profile, lifestyle, activeRisks, savings]);

            const goInput = () => setScreen('input');

            const startAnalysis = () => {
                setScreen('loading'); setLoadingStep(0);
                setTimeout(()=>setLoadingStep(1), 800); 
                setTimeout(()=>setLoadingStep(2), 1600);
                setTimeout(()=>setLoadingStep(3), 2400); 
                setTimeout(()=>{
                    setLoadingStep(4); 
                    setProfile(createProfileFromInput()); 
                }, 3200);
                setTimeout(()=>setScreen('result'), 4000);
            };

            const toggleRisk = (id) => setActiveRisks(p => ({...p, [id]: !p[id]}));
            
            const getStatus = (age) => {
                if(age>=100) return {color:'text-green-600', bg:'bg-green-50', bar:'bg-green-500', msg:'ì•ˆì „ ìƒíƒœ'};
                if(age>=80) return {color:'text-blue-600', bg:'bg-blue-50', bar:'bg-blue-500', msg:'ë³´í†µ ìƒíƒœ'};
                if(age>=70) return {color:'text-orange-600', bg:'bg-orange-50', bar:'bg-orange-500', msg:'ì£¼ì˜ í•„ìš”'};
                return {color:'text-red-600', bg:'bg-red-50', bar:'bg-red-500', msg:'ìœ„í—˜ ê²½ê³ '};
            };

            const resetAll = () => {
                setScreen('intro');
                setProfile(null);
                setSimulationResult(null);
                setActiveRisks({});
                setSavings(0);
                setLifestyle('standard');
            };

            return (
                <div className="w-full h-full min-h-screen flex flex-col max-w-[420px] mx-auto bg-white shadow-xl overflow-hidden">
                    {/* INTRO */}
                    {screen === 'intro' && (
                        <div className="flex-1 flex flex-col justify-center text-center p-8 animate-fade-in">
                            <div className="text-6xl mb-6 animate-bounce">ğŸª™</div>
                            <h1 className="text-2xl font-bold mb-4">ë‹¹ì‹ ì˜ ëˆì€<br/>ì–¸ì œ ì£½ì„ê¹Œìš”?</h1>
                            <p className="text-gray-400 mb-10 text-sm">í˜„ì¬ ì†Œë“ê³¼ ì§€ì¶œì„ ì…ë ¥í•˜ë©´<br/>ê¸ˆìœµ ìˆ˜ëª…ì„ ë¶„ì„í•´ ë“œë¦½ë‹ˆë‹¤.</p>
                            <button onClick={goInput} className="w-full py-4 rounded-xl bg-[#3182F6] text-white font-bold active:scale-95 transition shadow-lg">ë‚´ ë°ì´í„° ì…ë ¥í•˜ê¸°</button>
                        </div>
                    )}

                    {/* INPUT FORM */}
                    {screen === 'input' && (
                        <div className="flex-1 flex flex-col p-6 animate-fade-in bg-white overflow-y-auto">
                            <div className="flex items-center gap-2 mb-8">
                                <button onClick={()=>setScreen('intro')} className="text-gray-400 hover:text-gray-800"><Icon d="M19 12H5M12 19l-7-7 7-7" /></button>
                                <h2 className="text-xl font-bold">ê¸°ë³¸ ì •ë³´ ì…ë ¥</h2>
                            </div>
                            <div className="space-y-6">
                                <div className="input-group">
                                    <label>ë‚˜ì´ (ì„¸)</label>
                                    <input type="number" name="age" value={inputData.age} onChange={handleInputChange} />
                                </div>
                                <div className="input-group">
                                    <label>ì§ì—…êµ°</label>
                                    <select name="jobType" value={inputData.jobType} onChange={handleInputChange}>
                                        <option value="office">ì§ì¥ì¸</option>
                                        <option value="civil">ê³µë¬´ì›/ê³µê¸°ì—…</option>
                                        <option value="free">í”„ë¦¬ëœì„œ</option>
                                        <option value="startup">ì‚¬ì—…ê°€/ìì˜ì—…</option>
                                        <option value="pro">ì „ë¬¸ì§</option>
                                    </select>
                                </div>
                                <div className="input-group">
                                    <label>ì›” í‰ê·  ì„¸í›„ ì†Œë“ (ë§Œì›)</label>
                                    <input type="number" name="monthlyIncome" value={inputData.monthlyIncome} onChange={handleInputChange} />
                                </div>
                                <div className="input-group">
                                    <label>í˜„ì¬ ìˆœìì‚° (ë¶€ì±„ ì œì™¸, ë§Œì›)</label>
                                    <input type="number" name="totalAssets" value={inputData.totalAssets} onChange={handleInputChange} placeholder="ì˜ˆ: 5000" />
                                </div>
                                <div className="input-group">
                                    <label>ì›” í‰ê·  ì§€ì¶œ (ìˆ¨ë§Œ ì‰¬ì–´ë„ ë‚˜ê°€ëŠ” ëˆ í¬í•¨)</label>
                                    <input type="number" name="monthlyExpense" value={inputData.monthlyExpense} onChange={handleInputChange} />
                                </div>
                            </div>
                            <button onClick={startAnalysis} className="mt-10 w-full py-4 rounded-xl bg-[#3182F6] text-white font-bold active:scale-95 transition shadow-lg flex items-center justify-center gap-2">
                                <span>ë¶„ì„ ì‹œì‘í•˜ê¸°</span> <Icon d={Icons.ArrowRight} size={18} />
                            </button>
                        </div>
                    )}

                    {/* LOADING */}
                    {screen === 'loading' && (
                        <div className="flex-1 flex flex-col justify-center items-center p-8 animate-fade-in">
                            <div className="w-12 h-12 border-4 border-gray-100 border-t-[#3182F6] rounded-full animate-spin mb-8"></div>
                            <div className="text-lg font-bold mb-2">ë°ì´í„° ë¶„ì„ ì¤‘...</div>
                            <div className="text-sm text-gray-400 mb-10">ì…ë ¥í•˜ì‹  ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤</div>
                            <div className="w-full space-y-4">
                                <div className={`flex items-center gap-3 ${loadingStep>=1?'text-gray-800':'text-gray-300'}`}><Icon d={Icons.Bank} /> <span>ìì‚° íë¦„ íŒŒì•…</span></div>
                                <div className={`flex items-center gap-3 ${loadingStep>=2?'text-gray-800':'text-gray-300'}`}><Icon d={Icons.Card} /> <span>ì†Œë¹„ ì„±í–¥ ë¶„ì„</span></div>
                                <div className={`flex items-center gap-3 ${loadingStep>=3?'text-gray-800':'text-gray-300'}`}><Icon d={Icons.Activity} /> <span>ìƒì•  ì£¼ê¸° ë¦¬ìŠ¤í¬ ì ìš©</span></div>
                                <div className={`flex items-center gap-3 ${loadingStep>=4?'text-gray-800':'text-gray-300'}`}><Icon d={Icons.Graph} /> <span>ê¸ˆìœµ ìˆ˜ëª… ì‹œë®¬ë ˆì´ì…˜</span></div>
                            </div>
                        </div>
                    )}

                    {/* RESULT */}
                    {screen === 'result' && profile && simulationResult && (
                        <div className="flex-1 overflow-y-auto hide-scrollbar pb-10 animate-fade-in">
                            <div className="sticky top-0 bg-white/95 backdrop-blur z-10 p-6 border-b border-gray-100">
                                <div className="flex justify-center mb-4">
                                    <span className="bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full font-bold flex items-center gap-1">
                                        <Icon d={Icons.User} size={14}/> {profile.age}ì„¸ Â· {profile.job}
                                    </span>
                                </div>
                                <div className="text-center mb-6">
                                    <span className={`inline-block px-3 py-1 rounded-full text-xs font-bold mb-2 ${getStatus(simulationResult.bankruptAge).bg} ${getStatus(simulationResult.bankruptAge).color}`}>
                                        {getStatus(simulationResult.bankruptAge).msg}
                                    </span>
                                    <div className="text-3xl font-extrabold leading-tight">
                                        ë‹¹ì‹ ì˜ ëˆì€<br/>
                                        <span className={getStatus(simulationResult.bankruptAge).color}>
                                            {simulationResult.isBankrupt ? `${simulationResult.bankruptAge}ì„¸` : '100ì„¸+'}
                                        </span>ì— ì‚¬ë§í•©ë‹ˆë‹¤.
                                    </div>
                                </div>
                                
                                <div className="flex justify-center gap-2 mb-6">
                                    {['basic','standard','rich'].map(l => (
                                        <button key={l} onClick={()=>setLifestyle(l)} 
                                            className={`px-4 py-2 rounded-full text-xs font-bold border transition ${lifestyle===l?'bg-[#191F28] text-white border-[#191F28]':'bg-white text-gray-500 hover:bg-gray-50'}`}>
                                            {l==='basic'?'ì ˆì•½':l==='standard'?'ë³´í†µ':'ì—¬ìœ '}
                                        </button>
                                    ))}
                                </div>

                                <div className="mb-2">
                                    <div className="flex justify-between text-xs font-bold text-gray-500 mb-2">
                                        <span>ğŸ’¸ ìì‚° ìˆ˜ëª…</span>
                                        <span>{simulationResult.bankruptAge}ì„¸</span>
                                    </div>
                                    <div className="w-full h-3 bg-gray-100 rounded-full overflow-hidden">
                                        <div className={`h-full transition-all duration-700 ${getStatus(simulationResult.bankruptAge).bar}`} style={{width:`${Math.min(100, simulationResult.bankruptAge)}%`}}></div>
                                    </div>
                                    <p className="text-center text-[10px] text-gray-400 mt-2">â–² ê¸°ëŒ€ìˆ˜ëª… 100ì„¸ ê¸°ì¤€</p>
                                </div>
                            </div>

                            <div className="p-6">
                                <div className="flex items-center gap-2 text-lg font-bold mb-4">
                                    <Icon d={Icons.Alert} color="#FF8D4D" /> <span>{Math.floor(profile.age/10)*10}ëŒ€ ë¼ì´í”„ ë¦¬ìŠ¤í¬</span>
                                </div>
                                {profile.risks.map(r => (
                                    <div key={r.id} 
                                         onClick={() => toggleRisk(r.id)} 
                                         className="bg-white border border-gray-100 p-4 rounded-2xl mb-3 shadow-sm cursor-pointer hover:bg-gray-50 transition-colors relative"
                                    >
                                        <div className="text-[10px] bg-gray-100 text-gray-500 px-2 py-0.5 rounded inline-block mb-2">âš ï¸ ìœ„í—˜ë„ {r.prob}</div>
                                        <div className="flex justify-between items-center mb-1">
                                            <span className="font-bold text-gray-800">{r.title}</span>
                                            <div className={`w-11 h-6 rounded-full relative transition-colors ${activeRisks[r.id] ? 'bg-[#FF8D4D]' : 'bg-gray-200'}`}>
                                                <div className={`absolute top-[2px] left-[2px] bg-white border border-gray-300 rounded-full h-5 w-5 transition-transform ${activeRisks[r.id] ? 'translate-x-full border-white' : ''}`}></div>
                                            </div>
                                        </div>
                                        <div className="flex justify-between text-xs text-gray-500">
                                            <span>ì˜ˆìƒ ì†ì‹¤ì•¡</span>
                                            <span className="text-[#E94658] font-bold">-{formatMoney(r.loss)}</span>
                                        </div>
                                    </div>
                                ))}
                            </div>

                            <div className="p-6 bg-gray-50 border-t border-gray-100">
                                <div className="flex items-center gap-2 text-lg font-bold mb-4 text-gray-800">
                                    <Icon d={Icons.Shield} color="#3182F6" /> <span>ì†”ë£¨ì…˜ ì‹œë®¬ë ˆì´í„°</span>
                                </div>
                                <div className="bg-white p-5 rounded-2xl border border-gray-200 shadow-sm mb-6">
                                    <div className="text-sm font-bold text-[#3182F6] mb-4">â˜•ï¸ ì›” ì €ì¶•ì„ ëŠ˜ë¦°ë‹¤ë©´?</div>
                                    <input type="range" min="0" max="200" step="10" value={savings} onChange={(e)=>setSavings(Number(e.target.value))} 
                                        className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                                        style={{background: `linear-gradient(to right, #3182F6 ${(savings/200)*100}%, #e5e7eb ${(savings/200)*100}%)`}}
                                    />
                                    <div className="flex justify-between items-center mt-4">
                                        <span className="text-xs text-gray-500">ì¶”ê°€ ì €ì¶•ì•¡</span>
                                        <span className="text-lg font-bold text-[#3182F6]">{savings}ë§Œì›</span>
                                    </div>
                                </div>
                                <button onClick={resetAll} className="w-full py-4 bg-[#3182F6] text-white rounded-xl font-bold flex justify-center items-center gap-2 shadow-lg active:scale-95 transition">
                                    <Icon d={Icons.Refresh} /> <span>ë‹¤ì‹œ ì…ë ¥í•˜ê¸°</span>
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const LoadingItem = ({ step, current, icon, text }) => {
            const isDone = current > step;
            const isActive = current === step;
            return (
                <div className={`flex items-center gap-3 text-[14px] transition-all duration-300 ${isDone || isActive ? 'text-[#191F28] font-semibold' : 'text-[#aaa]'}`}>
                    <div className={`w-6 flex justify-center text-center transition-all duration-300`}>
                        {isDone ? <div className="text-[#3182F6]"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg></div> : <div className="opacity-50">{icon}</div>}
                    </div>
                    <span>{text}</span>
                </div>
            );
        };

        const TabButton = ({ children, active, onClick }) => (
            <button onClick={onClick} className={`px-3 py-2 rounded-[20px] text-[13px] font-semibold border transition-all ${active ? 'bg-[#191F28] text-white border-[#191F28]' : 'bg-white text-[#888] border-[#eee] hover:bg-gray-50'}`}>
                {children}
            </button>
        );

        const DiagItem = ({ label, value, status, color }) => (
            <div className="bg-[#F9FAFB] p-[10px] rounded-[10px] text-center">
                <div className="text-[11px] text-[#888] mb-1">{label}</div>
                <div className="text-[14px] font-bold text-[#191F28]">{value}</div>
                <div className="text-[10px] mt-[2px]" style={{ color: color }}>{status}</div>
            </div>
        );

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<LifePortSimulator />);
        
        // PWA Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js').then(reg => console.log('SW registered', reg)).catch(err => console.log('SW failed', err));
            });
        }
    </script>
</body>
</html>
